<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kollektivhuset Kombo | Bli medlem</title>
    <link rel="stylesheet" href="stylesheets/navigation.css" />
    <link rel="stylesheet" href="stylesheets/layout.css" />
    <link rel="stylesheet" href="stylesheets/form.css" />
    <link rel="stylesheet" href="stylesheets/modal.css" />
    <link rel="stylesheet" href="stylesheets/globals.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,400;0,600;1,400&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&display=swap"
      rel="stylesheet"
    />
  </head>
    <nav class="navigation container">
      <div class="navigation-link">
        <a href="/"><img alt="Kollektivhuset Kombo logo" src="media/logo.png" />
        <span class="sr-only">Home - Kollektivhuset Kombo</span>
        </a>
      </div>
      <ul class="navigation-links">
        <li class="navigation-link">
          <a href="medlem.html">Medlemskap och bostadskö</a>
        </li>
        <li class="navigation-link"><a href="stadgar.html">Stadgar</a></li>
        <li class="navigation-link">
          <a href="https://insidan.kollektivhuskombo.se/" target="_blank"
            >Insidan
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="21"
              viewBox="0 0 30 31"
              fill="none"
            >
              <path
                d="M27.0894 3.74126C23.271 -0.077165 17.0815 -0.077165 13.263 3.74126C10.3402 6.6641 9.6576 10.9727 11.2075 14.5473L1.44336 24.2499C1.21622 24.4765 1.03817 24.7475 0.92029 25.046C0.802414 25.3444 0.747239 25.6639 0.7582 25.9846L0.871111 28.9998C1.42796 29.3129 1.44593 30.3009 1.44593 30.3009L3.98641 30.4959C4.63565 30.5164 5.26435 30.2675 5.72113 29.8107L6.5269 29.005C7.02986 28.502 7.3147 27.7912 7.18896 27.0932C7.10941 26.6595 7.19666 26.2541 7.47124 25.9795C7.79457 25.6561 8.30011 25.5946 8.82103 25.7562C9.25471 25.8922 9.72688 25.805 10.0502 25.4842L10.1606 25.3739C10.5994 24.9556 10.6481 24.4706 10.5634 24.0651C10.4326 23.4339 10.6584 22.9129 11.0023 22.451C11.3025 22.0481 11.8747 21.8813 12.37 21.8736C13.2656 21.8608 13.8481 21.6658 14.482 21.032L16.0165 19.5051C19.6425 21.2116 24.0973 20.5675 27.0946 17.5702C30.9079 13.7492 30.9079 7.55969 27.0894 3.74126ZM23.5995 10.9829C22.5627 12.0196 20.8819 12.0196 19.8478 10.9829C18.811 9.9462 18.811 8.26538 19.8478 7.23122C20.8845 6.1945 22.5653 6.1945 23.5995 7.23122C24.6362 8.26538 24.6362 9.9462 23.5995 10.9829Z"
                fill="#FFCA28"
              />
            </svg>
          </a>
        </li>
      </ul>
    </nav>
    <div class="container">
      <div class="two-column">
        <!--Kolumn vänster-->
        <div>
          <h1>Bli Medlem</h1>
          <p>
            Vad kul att du vill bli medlem i Kombo! När du blir medlem ställs du
            autmatist i Kombos bostadskö. Vill du vara medlem men inte bo i
            huset är du givetvis precis lika välkommen!
          </p>
          <p>Medlemskapet kostar 200 kronor per år.</p>
        </div>
        <!--Kolumn höger-->
        <div class="column column-image">
          <div class="center-figure">
            <figure>
              <img src="media/image-16.png" alt=""/>
            </figure>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="two-column">
        <form id="registration-form" class="form content-max-width" action="#" method="post">
          <div class="form-field">
            <label for="name">För- och efternamn</label>
            <input type="text" id="name" name="name" required />
          </div>
          <div class="form-field">
            <label for="email">Mailadress</label>
            <input type="email" id="email" name="email" required />
          </div>
          <div class="form-field">
            <label for="dob">Födelsedatum</label>
            <input type="date" id="dob" name="dob" required />
          </div>
          <div class="form-conditions">
            <p>
              Vad kul att du vill bli medlem! Vi på föreningen värdesätter din
              integritet och vill försäkra dig om att vi tar sparandet av dina
              personuppgifter på största allvar. De uppgifter du lämnar till oss
              används endast inom ramen för föreningens verksamhet och kommer
              inte att delas med eller spridas till någon annan part. Vi
              använder endast dessa uppgifter för vår bostadskö och för att få
              en överblick av antalet medlemmar i Kombo.
            </p>
          </div>
          <div class="form-field form-field-horizontal">
            <label for="acceptConditions">Det låter bra! Jag godkänner</label>
            <input
              type="checkbox"
              id="acceptConditions"
              name="acceptConditions"
              required
            />
          </div>

          <div>
            <input type="submit" value="Bli medlem i Kombo" class="button-l" />
          </div>
        </form>
      </div>
    </div>
    <div class="spacer-l"></div>
    <div class="modal" id="modal-medlem">
      <div class="modal-content-wrapper">
        <img class="celebrate" src="media/firework.png" alt="fyrverkeri"/>
        <div class="modal-content">
        <p>Grattis!</p>
        <p>Ditt medlemskap i kombo är nu registrerat!</p>
        <p>Du behöver nu bara betala in medlemsavgiften på 200 kr. Lättast är via Swish till 123-035 10 72 och meddelandet "Medlemsavgift".</p>
        <p><img class="inline-qr" src="media/swish-QR-small.png" alt="Swish QR kod"/></p>
        <p>Det går även via Bankgiro: 5957-6900. Skriv Medlemsavgift som meddelande</p>
        <a class="button-l" href="/">Tillbaka till kombo Startsida</a>
      </div>
      </div>
    </div>
    <script>
      var modal = document.getElementById("modal-medlem");

      document.getElementById("registration-form").addEventListener("submit", function(event) {
          event.preventDefault();
          modal.style.display = "block";

          const formData = new FormData(this);
          const url = 'https://script.google.com/macros/s/AKfycbzJLiq7rTEeB8RxeJ7pyGWZEEoDzEPBEjR5N1mL3bkUTCSmcynjbXEr7Nleiw8836O5Hg/exec';

          const params = new URLSearchParams();
          params.append('email', document.getElementById("email").value);
          params.append('name', document.getElementById("name").value);
          params.append('birth', document.getElementById("dob").value);
          params.append('gdpr', 'Ja');

          for (const pair of formData.entries()) {
              params.append(pair[0], pair[1]);
          }

          fetch(url, {
              method: 'POST',
              body: params
          }).then(response => {
              if (response.ok) {
                  alert('Form submitted successfully.');
              } else {
                  alert('Form submission failed.');
              }
          }).catch(error => {
              console.error('Error:', error);
              alert('Form submission error.');
          });
      });
        
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    </script>
  </body>
</html>
